<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Create account | AI Photo Studio</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="theme-color" content="#4f46e5" />

  <!-- Firebase -->
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>

  <style>
    /* same styling as signin for consistency */
    :root {
      --bg:#050816; --card-bg:#0f172a; --accent:#3b82f6;
      --accent-soft:rgba(59,130,246,0.12); --border:rgba(148,163,184,0.35);
      --text:#e5e7eb; --muted:#9ca3af; --error:#f97373;
      --radius-xl:18px; --shadow-soft:0 18px 45px rgba(15,23,42,0.7);
    }
    *{box-sizing:border-box;margin:0;padding:0;font-family:system-ui,-apple-system,"SF Pro Text","Segoe UI",sans-serif;}
    body{
      min-height:100vh;
      background:radial-gradient(circle at top,#1e293b 0,#020617 55%,#000 100%);
      color:var(--text);
      display:flex;align-items:center;justify-content:center;
      padding:16px;
    }
    .shell{width:100%;max-width:420px;}
    .logo{display:flex;align-items:center;gap:10px;margin-bottom:18px;}
    .logo-dot{
      width:30px;height:30px;border-radius:999px;
      background:conic-gradient(from 210deg,#22d3ee,#6366f1,#f97316,#22d3ee);
      display:flex;align-items:center;justify-content:center;
      box-shadow:0 0 25px rgba(56,189,248,0.7);
    }
    .logo-dot-inner{width:20px;height:20px;border-radius:999px;background:#020617;}
    .logo-text-main{font-weight:600;letter-spacing:0.02em;}
    .logo-text-sub{font-size:0.8rem;color:var(--muted);}

    .card{
      background:linear-gradient(145deg,rgba(15,23,42,0.95),rgba(15,23,42,0.92));
      border-radius:var(--radius-xl);
      box-shadow:var(--shadow-soft);
      border:1px solid var(--border);
      padding:22px 20px 18px;
      backdrop-filter:blur(18px);
    }
    .card-header{margin-bottom:16px;}
    .card-title{font-size:1.25rem;font-weight:600;margin-bottom:6px;}
    .card-subtitle{font-size:0.9rem;color:var(--muted);line-height:1.4;}
    form{display:grid;gap:16px;margin-top:8px;}
    .field-label{font-size:0.8rem;color:var(--muted);margin-bottom:6px;}
    .field{display:flex;flex-direction:column;}
    .input{
      width:100%;padding:11px 12px;border-radius:999px;
      border:1px solid var(--border);
      background:rgba(15,23,42,0.8);color:var(--text);font-size:0.9rem;outline:none;
      transition:border-color 0.18s,box-shadow 0.18s,background 0.18s;
    }
    .input::placeholder{color:#6b7280;}
    .input:focus{
      border-color:var(--accent);
      box-shadow:0 0 0 1px rgba(59,130,246,0.6);
      background:rgba(15,23,42,0.95);
    }

    .btn{
      width:100%;border-radius:999px;border:none;
      padding:11px 14px;font-size:0.9rem;font-weight:500;
      cursor:pointer;display:flex;align-items:center;justify-content:center;gap:8px;
      transition:transform 0.08s,box-shadow 0.12s,background 0.2s;
    }
    .btn-primary{
      background:linear-gradient(135deg,#2563eb,#4f46e5);
      color:#f9fafb;
      box-shadow:0 14px 28px rgba(37,99,235,0.45);
      margin-top:4px;
    }
    .btn-primary:hover{transform:translateY(-1px);box-shadow:0 16px 32px rgba(37,99,235,0.55);}
    .btn-outline{
      background:transparent;
      border:1px solid rgba(148,163,184,0.6);
      color:var(--text);
    }
    .btn-outline:hover{
      background:rgba(15,23,42,0.9);
      border-color:rgba(209,213,219,0.8);
    }
    .divider{display:flex;align-items:center;gap:10px;margin:16px 0;}
    .divider-line{
      flex:1;height:1px;
      background:linear-gradient(to right,transparent,rgba(148,163,184,0.65),transparent);
    }
    .divider-text{
      font-size:0.78rem;color:var(--muted);
      text-transform:uppercase;letter-spacing:0.13em;
    }
    .card-footer{
      margin-top:16px;padding-top:14px;
      border-top:1px solid rgba(30,64,175,0.45);
      display:flex;justify-content:space-between;align-items:center;
      font-size:0.8rem;color:var(--muted);
    }
    .pill{
      border-radius:999px;padding:4px 9px;
      background:var(--accent-soft);
      color:#bfdbfe;font-size:0.75rem;
      border:1px solid rgba(59,130,246,0.45);
    }
    .error{margin-top:6px;font-size:0.78rem;color:var(--error);min-height:16px;}
    @media (min-width:480px){body{padding:28px 16px;} .card{padding:26px 22px 20px;}}
  </style>
</head>
<body>
  <div class="shell">
    <div class="logo">
      <div class="logo-dot"><div class="logo-dot-inner"></div></div>
      <div>
        <div class="logo-text-main">AI Photo Studio</div>
        <div class="logo-text-sub">Create your free account in seconds</div>
      </div>
    </div>

    <div class="card">
      <div class="card-header">
        <h1 class="card-title">Create your account</h1>
        <p class="card-subtitle">Start free, upgrade to Pro any time.</p>
      </div>

      <form id="emailSignUpForm">
        <div class="field">
          <label class="field-label" for="name">Name</label>
          <input id="name" name="name" type="text" class="input"
            placeholder="Alex Bryant" autocomplete="name" required />
        </div>
        <div class="field">
          <label class="field-label" for="email">Email</label>
          <input id="email" name="email" type="email" class="input"
            placeholder="you@example.com" autocomplete="email" required />
        </div>
        <div class="field">
          <label class="field-label" for="password">Password</label>
          <input id="password" name="password" type="password" class="input"
            placeholder="Min 6 characters" autocomplete="new-password" required />
        </div>

        <button type="submit" class="btn btn-primary" id="btnEmailSignUp">
          Create account
        </button>

        <div class="error" id="emailError"></div>
      </form>

      <div class="divider">
        <div class="divider-line"></div>
        <div class="divider-text">Or</div>
        <div class="divider-line"></div>
      </div>

      <button class="btn btn-outline" id="btnGoogle">
        <span>Sign up with Google</span>
      </button>

      <div class="card-footer">
        <span>Already have an account?</span>
        <a href="/signin.html" class="link">Sign in</a>
        <span class="pill">Free forever plan</span>
      </div>
    </div>
  </div>

  <script>
    const firebaseConfig = {
      apiKey: "AIzaSyDsBDuaZ_rl7ro63Fv5gPh37EwSkfh-NqM",
      authDomain: "aiphotostudioapp.firebaseapp.com",
      projectId: "aiphotostudioapp",
      storageBucket: "aiphotostudioapp.appspot.com",
      messagingSenderId: "1056724519182",
      appId: "1:1056724519182:web:93410e1b71a292e531ef5f",
      measurementId: "G-YMB9JJHNBE"
    };
    if (!firebase.apps.length) {
      firebase.initializeApp(firebaseConfig);
    }
    const auth = firebase.auth();
    const db   = firebase.firestore();

    const form     = document.getElementById("emailSignUpForm");
    const errEl    = document.getElementById("emailError");
    const btnEmail = document.getElementById("btnEmailSignUp");
    const btnGoogle= document.getElementById("btnGoogle");

    form.addEventListener("submit", async (e) => {
      e.preventDefault();
      errEl.textContent = "";
      btnEmail.disabled = true;
      btnEmail.textContent = "Creating…";

      const name  = document.getElementById("name").value.trim();
      const email = document.getElementById("email").value.trim();
      const pass  = document.getElementById("password").value;

      try {
        const cred = await auth.createUserWithEmailAndPassword(email, pass);
        if (name) {
          await cred.user.updateProfile({ displayName: name });
        }
        // create user doc if you want
        await db.collection("users").doc(cred.user.uid).set({
          name,
          email,
          createdAt: firebase.firestore.FieldValue.serverTimestamp(),
          tier: "free",
          isPro: false
        }, { merge: true });

        window.location.href = "/profile.html";
      } catch (err) {
        console.error(err);
        errEl.textContent = err.message.replace("Firebase:", "").trim();
      } finally {
        btnEmail.disabled = false;
        btnEmail.textContent = "Create account";
      }
    });

    btnGoogle.addEventListener("click", async () => {
      errEl.textContent = "";
      btnGoogle.disabled = true;
      btnGoogle.textContent = "Connecting to Google…";

      try {
        const provider = new firebase.auth.GoogleAuthProvider();
        const cred = await auth.signInWithPopup(provider);

        await db.collection("users").doc(cred.user.uid).set({
          name: cred.user.displayName || "",
          email: cred.user.email || "",
          createdAt: firebase.firestore.FieldValue.serverTimestamp(),
          tier: "free",
          isPro: false
        }, { merge: true });

        window.location.href = "/profile.html";
      } catch (err) {
        console.error(err);
        errEl.textContent = err.message.replace("Firebase:", "").trim();
      } finally {
        btnGoogle.disabled = false;
        btnGoogle.textContent = "Sign up with Google";
      }
    });
  </script>
</body>
</html>
