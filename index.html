<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>AI Photo Studio (Test)</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="icon" href="logo-192.png">
  <style>
    body { font-family: sans-serif; padding: 20px; background: #f9fafb; }
    h1 { color: #0f172a; }
    .tools { margin-top: 20px; display: flex; flex-direction: column; gap: 10px; }
    .toggle, .sliderGroup { display: flex; align-items: center; gap: 10px; }
    .sliderGroup label { width: 120px; }
    #bgLibrary { display: flex; gap: 8px; flex-wrap: wrap; margin-top: 12px; }
    .thumb { width: 80px; height: 60px; cursor: pointer; border: 1px solid #ccc; border-radius: 6px; overflow: hidden; }
    .thumb img { width: 100%; height: 100%; object-fit: cover; }
    #trialInfo { margin-top: 10px; font-size: 14px; color: #555; }
    button:disabled { opacity: 0.5; }
  </style>
</head>
<body>

<h1>AI Photo Studio (Test)</h1>

<div class="tools">
  <div class="toggle">
    <label><input type="checkbox" id="smartToggle" checked /> Smart Positioning</label>
  </div>

  <div class="sliderGroup">
    <label for="sharpenSlider">Edge Refine</label>
    <input type="range" id="sharpenSlider" min="0" max="100" value="40" />
  </div>

  <div class="sliderGroup">
    <label for="shadowSlider">Shadow Strength</label>
    <input type="range" id="shadowSlider" min="0" max="100" value="20" />
  </div>

  <div>
    <button id="btnHD">Download HD</button>
    <span id="trialInfo">Checking trial...</span>
  </div>

  <div>
    <strong>Choose Background:</strong>
    <div id="bgLibrary"></div>
  </div>
</div>

<script>
  const trialInfo = document.getElementById('trialInfo');
  const btnHD = document.getElementById('btnHD');

  function initTrial() {
    if (!localStorage.getItem('trial_start')) {
      localStorage.setItem('trial_start', Date.now());
    }
  }

  function trialDaysLeft() {
    const start = parseInt(localStorage.getItem('trial_start'), 10);
    const elapsed = (Date.now() - start) / (1000 * 60 * 60 * 24);
    return Math.max(0, 7 - Math.floor(elapsed));
  }

  function updateTrialUI() {
    const days = trialDaysLeft();
    if (days > 0) {
      trialInfo.textContent = `✅ Trial active: ${days} day(s) left`;
      btnHD.disabled = false;
    } else {
      trialInfo.textContent = `❌ Trial expired. Upgrade to download HD.`;
      btnHD.disabled = true;
    }
  }

  function renderBgLibrary() {
    const presets = [
      {name: 'Beach', url: 'https://images.unsplash.com/photo-1507525428034-b723cf961d3e'},
      {name: 'City', url: 'https://images.unsplash.com/photo-1468436139062-f60a71c5c892'},
      {name: 'Park', url: 'https://images.unsplash.com/photo-1503264116251-35a269479413'},
      {name: 'White', url: 'https://via.placeholder.com/800x600/ffffff/000000?text=White+BG'}
    ];
    const lib = document.getElementById('bgLibrary');
    lib.innerHTML = presets.map(p =>
      `<div class="thumb" title="${p.name}" onclick="alert('Background selected: ${p.name}')"><img src="${p.url}" /></div>`
    ).join('');
  }

  document.addEventListener('DOMContentLoaded', () => {
    initTrial();
    updateTrialUI();
    renderBgLibrary();

    document.getElementById('btnHD').addEventListener('click', () => {
      if (trialDaysLeft() === 0) {
        alert("Trial expired. Please upgrade for HD export.");
      } else {
        alert("✅ HD export successful.");
      }
    });
  });
</script>

</body>
</html>
